(()=>{const e=window.speechSynthesis;e||alert("speechSynthesis not supported!!");const t=new Audio("./wrong.mp3");t.playbackRate=10;let n=["HELLO, MY NAME IS ARYAN","I AM 5 YEAR OLD","I LIKE PLAYING SOCCER","I LIVE IN TOKIWA URAWA","NICE TO MEET YOU"];for(var o=0;o<5;o++)n.push(Math.random().toString(36).substr(2,10).toUpperCase());let s=0,c=n[s],l=0,r="",a=1,d=e=>!e||/^\s*$/.test(e);function u(e){try{return document.getElementById(`id_${e.toLowerCase()}`)}catch(e){}return!1}function m(){d(r)&&(r="space"),","==r&&(r="comma");let t=u(r);if(t&&(document.querySelectorAll(".select").forEach((e=>e.classList.remove("select"))),t.classList.add("select"),a)){var n=new SpeechSynthesisUtterance(r);n.lang="en-US",e.speak(n)}}window.addEventListener("load",(e=>{a=document.getElementById("sound_play").checked,document.getElementById("sound_play").addEventListener("change",(e=>{a=e.target.checked})),document.getElementById("textbox").focus(),document.getElementById("textbox").addEventListener("keypress",(e=>{let o=e.key.toUpperCase();if(console.log("inputChar",o,e.keyCode),console.log("selChar",r),32==e.keyCode&&(o="space"),44==e.keyCode&&(o="comma"),d(r)&&(r="space"),o!==r){let n=u(o);return n&&(n.classList.add("select-error"),t.play(),setTimeout((()=>n.classList.remove("select-error")),200)),e.preventDefault(),!1}return document.querySelectorAll("button.select").forEach((e=>e.classList.remove("select"))),s>=n.length?(alert(`Complete :${s}`),!0):(l>=c.length-1&&(l=-1,s++,c=n[s],document.getElementById("question").textContent=c,setTimeout((()=>document.getElementById("textbox").value=""),100),document.getElementById("char_cnt").textContent=s),l++,r=c[l].toUpperCase(),m(),!0)})),document.getElementById("question").textContent=c,l=0,r=c[l].toUpperCase(),m()}))})();